# ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–Ω–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –¥–ª—è —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—è HNS Studio

## –ü—Ä–æ–±–ª–µ–º—ã –∫–æ—Ç–æ—Ä—ã–µ –±—ã–ª–∏ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω—ã:

1. **–ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –ø–æ—Ä—Ç** - —Ç–µ–ø–µ—Ä—å –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –ø–æ—Ä—Ç 5000 (–Ω–µ 3000)
2. **–ü—Ä–æ–±–ª–µ–º–∞ —Å —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏–º–∏ —Ñ–∞–π–ª–∞–º–∏** - –¥–æ–±–∞–≤–ª–µ–Ω–æ —Å–æ–∑–¥–∞–Ω–∏–µ –ø–∞–ø–∫–∏ server/public
3. **–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ tsx** - —Ç–µ–ø–µ—Ä—å –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è —Å–∫–æ–º–ø–∏–ª–∏—Ä–æ–≤–∞–Ω–Ω—ã–π dist/index.js
4. **–ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ–µ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–µ —Ñ–∞–π–ª–∞** - ecosystem.config.cjs –≤–º–µ—Å—Ç–æ .js

## –û–±–Ω–æ–≤–ª–µ–Ω–Ω–∞—è –ø—Ä–æ—Å—Ç–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è:

### 1. –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –±–∞–∑–æ–≤—ã—Ö –ø–∞–∫–µ—Ç–æ–≤
```bash
curl -fsSL https://deb.nodesource.com/setup_20.x | sudo -E bash -
sudo apt update && sudo apt install -y nodejs git nginx postgresql postgresql-contrib
sudo npm install -g pm2
```

### 2. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ PostgreSQL
```bash
sudo systemctl start postgresql
sudo -u postgres psql -c "CREATE USER hns_user WITH PASSWORD 'MyPass123';"
sudo -u postgres psql -c "CREATE DATABASE hns_studio OWNER hns_user;"
```

### 3. –°–æ–∑–¥–∞–Ω–∏–µ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ –∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ –ø—Ä–æ–µ–∫—Ç–∞
```bash
sudo mkdir -p /var/www/hns-studio
sudo chown $USER:$USER /var/www/hns-studio
cd /var/www/hns-studio

# –°–∫–æ–ø–∏—Ä—É–π—Ç–µ —Å—é–¥–∞ —Ñ–∞–π–ª—ã –ø—Ä–æ–µ–∫—Ç–∞

# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
npm install

# –°–±–æ—Ä–∫–∞ –ø—Ä–æ–µ–∫—Ç–∞
npm run build

# –í–ê–ñ–ù–û: –°–æ–∑–¥–∞–Ω–∏–µ –ø–∞–ø–∫–∏ –¥–ª—è —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏—Ö —Ñ–∞–π–ª–æ–≤
mkdir -p server/public
cp -r dist/public/* server/public/ 2>/dev/null || echo "–°—Ç–∞—Ç–∏–∫–∞ –≥–æ—Ç–æ–≤–∞"
```

### 4. –°–æ–∑–¥–∞–Ω–∏–µ .env —Ñ–∞–π–ª–∞
```bash
cat > .env << 'EOF'
NODE_ENV=production
PORT=5000
DATABASE_URL=postgresql://hns_user:MyPass123@localhost:5432/hns_studio
EOF
```

### 5. –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è Nginx (–ø–æ—Ä—Ç 5000)
```bash
sudo tee /etc/nginx/sites-available/your-domain.com << 'EOF'
server {
    listen 80;
    server_name your-domain.com www.your-domain.com;

    location / {
        proxy_pass http://localhost:5000;
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
        proxy_set_header X-Forwarded-Proto $scheme;
    }

    location /assets/ {
        alias /var/www/hns-studio/server/public/assets/;
        expires 1y;
        add_header Cache-Control "public, immutable";
    }
}
EOF

sudo ln -s /etc/nginx/sites-available/your-domain.com /etc/nginx/sites-enabled/
sudo rm -f /etc/nginx/sites-enabled/default
sudo systemctl restart nginx
```

### 6. PM2 –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è (—Å–∫–æ–º–ø–∏–ª–∏—Ä–æ–≤–∞–Ω–Ω—ã–π JS)
```bash
cat > ecosystem.config.cjs << 'EOF'
module.exports = {
  apps: [{
    name: 'hns-studio',
    script: 'dist/index.js',
    env: {
      NODE_ENV: 'production',
      PORT: 5000
    },
    error_file: './logs/err.log',
    out_file: './logs/out.log'
  }]
};
EOF

mkdir -p logs
pm2 start ecosystem.config.cjs
pm2 save
pm2 startup
```

### 7. SSL —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç
```bash
sudo apt install certbot python3-certbot-nginx
sudo certbot --nginx -d your-domain.com
```

## –ö–ª—é—á–µ–≤—ã–µ –æ—Ç–ª–∏—á–∏—è –æ—Ç —Å—Ç–∞—Ä–æ–π –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏:

‚ùå **–ë—ã–ª–æ (–Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ):**
- PORT=3000
- script: 'server/index.ts' —Å tsx
- ecosystem.config.js
- –ù–µ —Å–æ–∑–¥–∞–≤–∞–ª–∞—Å—å –ø–∞–ø–∫–∞ server/public

‚úÖ **–°—Ç–∞–ª–æ (–ø—Ä–∞–≤–∏–ª—å–Ω–æ):**
- PORT=5000
- script: 'dist/index.js' (—Å–∫–æ–º–ø–∏–ª–∏—Ä–æ–≤–∞–Ω–Ω—ã–π)
- ecosystem.config.cjs 
- –û–±—è–∑–∞—Ç–µ–ª—å–Ω–æ–µ —Å–æ–∑–¥–∞–Ω–∏–µ server/public

## –î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ –ø—Ä–æ–±–ª–µ–º:

### –ï—Å–ª–∏ 502 Bad Gateway:
```bash
# –ü—Ä–æ–≤–µ—Ä—å —á—Ç–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –∑–∞–ø—É—â–µ–Ω–æ
pm2 status

# –ü—Ä–æ–≤–µ—Ä—å –ª–æ–≥–∏
pm2 logs hns-studio

# –ü—Ä–æ–≤–µ—Ä—å –ø–æ—Ä—Ç
netstat -tlnp | grep :5000

# –ï—Å–ª–∏ –æ—à–∏–±–∫–∏ —Å –ø–∞–ø–∫–æ–π public:
mkdir -p server/public
cp -r dist/public/* server/public/
pm2 restart hns-studio
```

### –ï—Å–ª–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –ø–∞–¥–∞–µ—Ç:
```bash
# –û—Å—Ç–∞–Ω–æ–≤–∏ –∏ –∑–∞–ø—É—Å—Ç–∏ –∑–∞–Ω–æ–≤–æ —Å–∫–æ–º–ø–∏–ª–∏—Ä–æ–≤–∞–Ω–Ω—É—é –≤–µ—Ä—Å–∏—é
pm2 stop hns-studio
pm2 delete hns-studio
pm2 start dist/index.js --name hns-studio
```

## –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π —Å–∫—Ä–∏–ø—Ç –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è:

```bash
cat > update.sh << 'EOF'
#!/bin/bash
cd /var/www/hns-studio

echo "üîÑ –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞..."
pm2 stop hns-studio || true
npm ci
npm run build
mkdir -p server/public
cp -r dist/public/* server/public/ 2>/dev/null || echo "–°—Ç–∞—Ç–∏–∫–∞ –≥–æ—Ç–æ–≤–∞"
pm2 start ecosystem.config.cjs
pm2 save
echo "‚úÖ –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∑–∞–≤–µ—Ä—à–µ–Ω–æ!"
EOF

chmod +x update.sh
```

–¢–µ–ø–µ—Ä—å —ç—Ç–∞ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –¥–æ–ª–∂–Ω–∞ —Ä–∞–±–æ—Ç–∞—Ç—å –±–µ–∑ –æ—à–∏–±–æ–∫! üéâ